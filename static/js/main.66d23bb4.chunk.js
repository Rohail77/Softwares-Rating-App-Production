(this["webpackJsonpsoftware-rating-app"]=this["webpackJsonpsoftware-rating-app"]||[]).push([[0],{41:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var r=a(3),s=a.n(r),n=a(34),i=a.n(n),c=a(9),o=a(7),l=a(8),u=a(4),d=a(11),h=a(10),j=(a(41),a(16)),v=a(6),b=a(1);var f=function(e){var t=e.isActive;return Object(b.jsx)(v.b,{className:"page-link".concat(t?" active-page-link":""),to:"/",children:"Home"})};var m=function(){return Object(b.jsx)("div",{className:"wait-msg",children:Object(b.jsx)("img",{src:"/images/wait.svg",alt:"wait icon"})})},g=a(15),w=a(19);w.a.initializeApp({apiKey:"AIzaSyAAL2vMrnemHFy-AJCxUMp1O2Rtv9E_8D4",authDomain:"my-holiday-proje-1616778972307.firebaseapp.com",projectId:"my-holiday-proje-1616778972307",storageBucket:"my-holiday-proje-1616778972307.appspot.com",messagingSenderId:"1055469780819",appId:"1:1055469780819:web:9cecb9a29babeadf1caba6",measurementId:"G-K8TPK4W4H3"});var p=w.a.firestore(),O=w.a.auth();function x(e){return new Intl.DateTimeFormat("en-US").format(e)}var S=new(function(){function e(){Object(o.a)(this,e)}return Object(l.a)(e,[{key:"set",value:function(){this.userRef=p.collection("Users").doc(this.id)}},{key:"id",get:function(){return O.currentUser.uid}},{key:"email",get:function(){return O.currentUser.email}},{key:"name",get:function(){return O.currentUser.displayName}},{key:"updateUsername",value:function(e){var t=this;return O.currentUser.updateProfile({displayName:e}).then((function(){return t.userRef.get()})).then((function(e){return e.data().reviewedSoftwares})).then((function(a){a.forEach((function(r,s){p.collection("Softwares").doc(r).collection("Reviews").doc(t.id).update({username:e}),a.length}))})).catch((function(e){return console.log("Error: ",e)}))}},{key:"delete",value:function(e){var t=this,a=w.a.auth.EmailAuthProvider.credential(S.email,e);return O.currentUser.reauthenticateWithCredential(a).then((function(){return t.userRef.delete()})).then((function(){O.currentUser.delete()}))}},{key:"updatePassword",value:function(e,t){var a=w.a.auth.EmailAuthProvider.credential(S.email,e);return O.currentUser.reauthenticateWithCredential(a).then((function(){if(e===t)throw new Error("No change to update");return O.currentUser.updatePassword(t)}))}},{key:"canReview",value:function(e){return p.collection("Softwares").doc(e).collection("Reviews").doc(this.id).get().then((function(e){return!e.exists}))}},{key:"updateReview",value:function(e,t){return p.collection("Softwares").doc(e).collection("Reviews").doc(this.id).update(Object(c.a)({date:w.a.firestore.Timestamp.now()},t))}},{key:"deleteReview",value:function(e){var t=this;return this.userRef.update({reviewedSoftwares:w.a.firestore.FieldValue.arrayRemove(e)}).then((function(){return p.collection("Softwares").doc(e).collection("Reviews").doc(t.id).delete()})).catch((function(e){return console.log("Error: ",e)}))}},{key:"bindUpdaterToReviews",value:function(e){var t=this;this.userRef.get().then((function(a){a.exists&&a.data().reviewedSoftwares.forEach((function(a){p.collection("Softwares").doc(a).collection("Reviews").doc(t.id).onSnapshot(e)}))}))}},{key:"getReviews",value:function(e){var t=this,a=[];this.userRef.get().then((function(t){return t.exists?t.data().reviewedSoftwares:(e(a),!1)})).then((function(r){r&&0!==r.length?r.forEach((function(s,n){var i;p.collection("Softwares").doc(s).get().then((function(e){return i=e.data().name,p.collection("Softwares").doc(s).collection("Reviews").doc(t.id).get()})).then((function(t){a.unshift(Object(c.a)(Object(c.a)({softwareID:s,softwareName:i},t.data()),{},{date:x(t.data().date.toDate())})),n+1===r.length&&e(a)}))})):e(a)})).catch((function(e){return console.log("Error: ",e)}))}},{key:"addSoftwareToReviews",value:function(e){return p.collection("Users").doc(S.id).update({reviewedSoftwares:w.a.firestore.FieldValue.arrayUnion(e)})}},{key:"write",value:function(e){return p.collection("Users").doc(this.id).set({reviewedSoftwares:[]}).catch((function(e){return console.log("Error: ",e)}))}},{key:"isSignedin",value:function(){return O.currentUser}},{key:"isEmailVerified",value:function(){return O.currentUser.emailVerified}}]),e}()),R=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={password:"",deleted:!1,error:!1,errorMsg:""},r.handleChange=r.handleChange.bind(Object(u.a)(r)),r.handleSubmit=r.handleSubmit.bind(Object(u.a)(r)),r.closeErrorMessage=r.closeErrorMessage.bind(Object(u.a)(r)),r}return Object(l.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,r=t.value;this.setState(Object(g.a)({},a,r))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state.password,r=this.props,s=r.wait,n=r.stopWait;s(),S.delete(a).then((function(){n(),t.setState({deleted:!0})})).catch((function(e){n(),t.showError(e.message)}))}},{key:"showError",value:function(e){this.setState({error:!0,errorMsg:e})}},{key:"reset",value:function(){this.setState({password:"",error:!1,errorMsg:""})}},{key:"closeErrorMessage",value:function(e){e.preventDefault(),this.reset()}},{key:"render",value:function(){var e=this.state,t=e.password,a=e.deleted,s=e.error,n=e.errorMsg;return Object(b.jsxs)(r.Fragment,{children:[a?Object(b.jsx)(j.a,{to:"/"}):null,Object(b.jsxs)("section",{className:"danger-zone",children:[Object(b.jsx)("h2",{className:"danger-zone__h",children:"Danger Zone"}),Object(b.jsx)("h1",{className:"danger-zone__delete-h",children:"Delete account"}),Object(b.jsxs)("div",{className:"danger-zone__cta",children:[Object(b.jsx)("input",{type:"password",name:"password",value:t,placeholder:"Enter your password",onChange:this.handleChange}),Object(b.jsx)("button",{type:"button",className:"danger-zone__delete-btn".concat(t.length<6?" danger-zone__delete-btn--disabled":""),onClick:this.handleSubmit,children:"Delete"})]}),s?Object(b.jsxs)("div",{className:"danger-zone__error-msg",children:[Object(b.jsxs)("a",{href:"close",className:"danger-zone__error-msg__cross",onClick:this.closeErrorMessage,children:[Object(b.jsx)("img",{src:"/images/cross.svg",alt:"cross"})," "]}),Object(b.jsx)("p",{className:"danger-zone__error-msg__para",children:n})]}):null,Object(b.jsx)("p",{className:"danger-zone__warning-para",children:"Deleting your account will not delete your ratings history. Delete it manually if you desire to."})]})]})}}]),a}(r.Component);var k=function(){return Object(b.jsx)("form",{className:"email-form",children:Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{htmlFor:"email",children:"Email"}),Object(b.jsx)("input",{className:"input-field",type:"email",name:"email",id:"email",value:S.email,disabled:!0})]})})},y=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).state={name:S.name,activated:!1,updated:!1,error:!1,errorMsg:""},s.data={errorMsg:""},s.nameFieldRef=Object(r.createRef)(),s.handleChange=s.handleChange.bind(Object(u.a)(s)),s.handleSubmit=s.handleSubmit.bind(Object(u.a)(s)),s.activateForm=s.activateForm.bind(Object(u.a)(s)),s.deactivateForm=s.deactivateForm.bind(Object(u.a)(s)),s.hideSuccessMessage=s.hideSuccessMessage.bind(Object(u.a)(s)),s.hideErrorMessage=s.hideErrorMessage.bind(Object(u.a)(s)),s.reset=s.reset.bind(Object(u.a)(s)),s}return Object(l.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,r=t.value;this.setState(Object(g.a)({},a,r))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.removeExtraSpaces()}},{key:"removeExtraSpaces",value:function(){this.setState((function(e){return{name:e.name.split(" ").filter((function(e){return e})).join(" ")}}),this.updateName)}},{key:"updateName",value:function(){var e=this;if(!this.validate())return this.showErrorMessage(this.data.errorMsg),void setTimeout(this.hideErrorMessage,2e3);var t=this.state.name,a=this.props,r=a.wait,s=a.stopWait;r(),S.updateUsername(t).then((function(){s(),e.deactivateForm(),e.showSuccessMessage()}))}},{key:"validate",value:function(){var e=this.state.name;return""===e?(this.data.errorMsg="Name field is empty",!1):e.length<2?(this.data.errorMsg="Name should be at least 2 characters long",!1):S.name!==e||(this.data.errorMsg="No change to update",!1)}},{key:"isChange",value:function(){var e=this.state.name;return S.name!==e}},{key:"showSuccessMessage",value:function(){var e=this;this.setState({updated:!0},(function(){setTimeout(e.hideSuccessMessage,2e3)}))}},{key:"hideSuccessMessage",value:function(){this.setState({updated:!1})}},{key:"showErrorMessage",value:function(e){this.setState({error:!0,errorMsg:e})}},{key:"hideErrorMessage",value:function(){this.setState({error:!1,errorMsg:""})}},{key:"activateForm",value:function(){var e=this;this.setState({activated:!0},(function(){return e.nameFieldRef.current.focus()}))}},{key:"deactivateForm",value:function(){this.setState({activated:!1})}},{key:"reset",value:function(){this.setState({name:S.name,activated:!1})}},{key:"render",value:function(){var e=this.state,t=e.name,a=e.activated,r=e.updated,s=e.error,n=e.errorMsg;return Object(b.jsxs)("form",{className:"name-form",onSubmit:this.handleSubmit,children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{htmlFor:"name",children:"Name"}),Object(b.jsx)("input",{className:"input-field",type:"text",name:"name",id:"name",value:t,onChange:this.handleChange,disabled:!a,ref:this.nameFieldRef,maxLength:50})]}),a?Object(b.jsxs)("div",{className:"ctas",children:[Object(b.jsx)("input",{type:"submit",className:"save-btn",value:"Save"}),Object(b.jsxs)("button",{type:"button",className:"cancel-btn",onClick:this.reset,children:["Cancel"," "]})]}):Object(b.jsx)("div",{className:"ctas",children:Object(b.jsxs)("button",{className:"change-btn",onClick:this.activateForm,children:["Change"," "]})}),r?Object(b.jsx)("p",{className:"success-msg",children:"* Name Changed"}):null,s?Object(b.jsxs)("p",{className:"error-msg",children:["* ",n]}):null]})}}]),a}(r.Component),N=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).state={oldPassword:"",newPassword:"",activated:!1,updated:!1,error:!1,errorMsg:""},s.passwordFieldRef=Object(r.createRef)(),s.handleChange=s.handleChange.bind(Object(u.a)(s)),s.handleSubmit=s.handleSubmit.bind(Object(u.a)(s)),s.activateForm=s.activateForm.bind(Object(u.a)(s)),s.deactivateForm=s.deactivateForm.bind(Object(u.a)(s)),s.hideSuccessMessage=s.hideSuccessMessage.bind(Object(u.a)(s)),s.reset=s.reset.bind(Object(u.a)(s)),s.hideErrorMessage=s.hideErrorMessage.bind(Object(u.a)(s)),s}return Object(l.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,r=t.value;this.setState(Object(g.a)({},a,r))}},{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),this.validate()){var a=this.state,r=a.oldPassword,s=a.newPassword,n=this.props,i=n.wait,c=n.stopWait;i(),S.updatePassword(r,s).then((function(){c(),t.deactivateForm(),t.showSuccessMessage(),t.reset()})).catch((function(e){c(),t.showErrorMessage(e.message),setTimeout(t.hideErrorMessage,2e3)}))}else this.showErrorMessage("The form is not filled completely"),setTimeout(this.hideErrorMessage,2e3)}},{key:"validate",value:function(){var e=this.state,t=e.oldPassword,a=e.newPassword;return""!==t&&""!==a}},{key:"showSuccessMessage",value:function(){var e=this;this.setState({updated:!0},(function(){setTimeout(e.hideSuccessMessage,2e3)}))}},{key:"hideSuccessMessage",value:function(){this.setState({updated:!1})}},{key:"showErrorMessage",value:function(e){this.setState({error:!0,errorMsg:e})}},{key:"hideErrorMessage",value:function(){this.setState({error:!1,errorMsg:""})}},{key:"activateForm",value:function(){var e=this;this.setState({activated:!0},(function(){return e.passwordFieldRef.current.focus()}))}},{key:"deactivateForm",value:function(){this.setState({activated:!1})}},{key:"reset",value:function(){this.setState({oldPassword:"",newPassword:"",activated:!1})}},{key:"render",value:function(){var e=this.state,t=e.oldPassword,a=e.newPassword,s=e.activated,n=e.updated,i=e.error,c=e.errorMsg;return Object(b.jsxs)("form",{className:"password-form",onSubmit:this.handleSubmit,children:[s?Object(b.jsxs)(r.Fragment,{children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{htmlFor:"old-password",children:"Enter Old Password"}),Object(b.jsx)("input",{className:"input-field",type:"password",name:"oldPassword",id:"old-password",value:t,onChange:this.handleChange,ref:this.passwordFieldRef,maxLength:30})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{htmlFor:"new-password",children:"Enter New Password"}),Object(b.jsx)("input",{className:"input-field",type:"password",name:"newPassword",id:"new-password",value:a,onChange:this.handleChange,placeholder:"At least 6 characters long",maxLength:30}),i?Object(b.jsxs)("p",{className:"error-msg",children:["* ",c]}):null]})]}):Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{htmlFor:"password",children:"Password"}),Object(b.jsx)("input",{className:"input-field",type:"password",name:"password",id:"password",value:"******",onChange:this.handleChange,ref:this.passwordFieldRef,disabled:!s})]}),s?Object(b.jsxs)("div",{className:"ctas",children:[Object(b.jsx)("input",{type:"submit",className:"save-btn",value:"Save"}),Object(b.jsxs)("button",{type:"button",className:"cancel-btn",onClick:this.reset,children:["Cancel"," "]})]}):Object(b.jsx)("div",{className:"ctas",children:Object(b.jsxs)("button",{className:"change-btn",onClick:this.activateForm,children:["Change"," "]})}),n?Object(b.jsx)("p",{className:"success-msg",children:"* Password Changed"}):null]})}}]),a}(r.Component);var C=function(e){var t=e.wait,a=e.stopWait;return Object(b.jsxs)("section",{className:"forms",children:[Object(b.jsx)(k,{}),Object(b.jsx)(y,{wait:t,stopWait:a}),Object(b.jsx)(N,{wait:t,stopWait:a})]})},P=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={onWait:!1},r.wait=r.wait.bind(Object(u.a)(r)),r.stopWait=r.stopWait.bind(Object(u.a)(r)),r}return Object(l.a)(a,[{key:"wait",value:function(){this.setState({onWait:!0})}},{key:"stopWait",value:function(){this.setState({onWait:!1})}},{key:"render",value:function(){var e=this.state.onWait;return Object(b.jsxs)("div",{className:"wrapper account-wrapper",children:[Object(b.jsx)("header",{children:Object(b.jsxs)("div",{className:"breadcrumbs",children:[Object(b.jsx)(f,{}),Object(b.jsx)("span",{children:" \\ "}),Object(b.jsx)(v.b,{className:"page-link active-page-link",to:"/account",children:"Account"})]})}),Object(b.jsx)(C,{wait:this.wait,stopWait:this.stopWait}),Object(b.jsx)(R,{wait:this.wait,stopWait:this.stopWait}),e?Object(b.jsx)(m,{}):null]})}}]),a}(r.Component);var _=function(e){var t=e.setSoftwareSearchString,a=e.softwareSearchInput;return Object(b.jsxs)("div",{className:"search",children:[Object(b.jsx)("a",{className:"search__img",href:"null",onClick:function(e){e.preventDefault(),t(a.current.value)},children:Object(b.jsx)("img",{src:"images/search.svg",alt:"magnifying glass"})}),Object(b.jsx)("input",{type:"text",name:"name",placeholder:"Search",ref:a})]})};var D=function(e){var t=e.starType;return Object(b.jsx)("li",{className:"star",children:Object(b.jsx)("img",{src:"/images/".concat(t,".svg"),alt:t})})},U=a(56);var E=function(e){var t=e.averageRating,a=function(){return Math.floor(t)};return Object(b.jsx)("ul",{className:"stars-list",children:function(){for(var e=[],r=1;r<=a();r++)e.push("red star");a()<5&&!Number.isInteger(t)&&e.push("half filled red star");for(var s=1;s<=(Number.isInteger(t)?5-t:5-Math.ceil(t));s++)e.push("white star");return e}().map((function(e){return Object(b.jsx)(D,{starType:e},Object(U.a)())}))})};var M=function(e){var t=e.name,a=e.developer;return Object(b.jsxs)("div",{className:"software__details",children:[Object(b.jsx)("p",{className:"software__name",children:t}),Object(b.jsx)("p",{className:"software__developer",children:a})]})};var F=function(e){var t=e.name;return Object(b.jsx)("img",{src:"/images/software logos/".concat(t.toLowerCase(),".svg"),alt:"".concat(t.toLowerCase()," logo"),className:"software__logo"})};var I=function(e){var t=e.name;return Object(b.jsxs)(r.Fragment,{children:[Object(b.jsx)(F,{name:t}),Object(b.jsx)(M,Object(c.a)({},e))]})};var W=function(e){var t=e.software,a=t.name,r=t.developer,s=t.average_rating,n=t.id;return Object(b.jsx)("li",{className:"software",children:Object(b.jsxs)(v.b,{to:"/software_details/".concat(n),children:[Object(b.jsx)(I,{name:a,developer:r}),Object(b.jsx)(E,{averageRating:s})]})})};var T=function(e){var t=e.from;return Object(b.jsx)(v.b,{className:"signin-link",to:{pathname:"/signin",state:{from:t}},children:"Sign in"})},L=new(function(){function e(){Object(o.a)(this,e)}return Object(l.a)(e,[{key:"signout",value:function(){O.signOut()}},{key:"signup",value:function(e,t){var a=this,r=e.email,s=e.password,n=e.name;O.createUserWithEmailAndPassword(r,s).then((function(e){S.write(),e.user.updateProfile({displayName:n}),a.sendVerificationEmail(t)})).catch((function(e){return t({msg:e.message})}))}},{key:"sendVerificationEmail",value:function(e){var t=this;O.currentUser.sendEmailVerification().then((function(){t.signout(),e(null)})).catch((function(t){return e({msg:t.message})}))}},{key:"signin",value:function(e,t){var a=e.email,r=e.password;O.signInWithEmailAndPassword(a,r).then((function(e){S.isEmailVerified()?t():t({msg:"You have not verified your email. Please verify your email by clicking the link we emailed you at your provided email address (".concat(a,").")})})).catch((function(e){return t({msg:e.message})}))}},{key:"onLoginDetection",value:function(e){this.handleLoginDetection=e}},{key:"setAuthorizationStateObserver",value:function(){var e=this;O.onAuthStateChanged((function(t){t?e.handleLoginDetection(!0):e.handleLoginDetection(!1)}))}}]),e}());L.setAuthorizationStateObserver();var A=function(){return Object(b.jsxs)(v.b,{className:"signout-link",onClick:function(){return L.signout()},to:"/",children:[Object(b.jsx)("span",{children:"Signout"}),Object(b.jsx)("img",{src:"/images/signout.svg",alt:"signout"})]})};var z=function(e){var t=e.accountOptionsRef;return Object(b.jsxs)("ul",{className:"account__options",ref:t,children:[Object(b.jsx)("li",{children:Object(b.jsx)(v.b,{className:"account__option",to:"/account",children:"Account"})}),Object(b.jsx)("li",{children:Object(b.jsx)(v.b,{className:"account__option",to:"/rated_apps",children:"Rated Apps"})}),Object(b.jsx)("li",{children:Object(b.jsx)(A,{})})]})},V=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).state={dropdownOpen:!1},s.accountRef=Object(r.createRef)(),s.toggleDropdown=s.toggleDropdown.bind(Object(u.a)(s)),s.handleClickOutside=s.handleClickOutside.bind(Object(u.a)(s)),s}return Object(l.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"handleClickOutside",value:function(e){!this.accountRef.current||this.accountRef.current.contains(e.target)&&!this.accountRef.current!==e.target||this.setState((function(e){return{dropdownOpen:!1}}))}},{key:"toggleDropdown",value:function(e){e.preventDefault(),this.setState((function(e){return{dropdownOpen:!e.dropdownOpen}}))}},{key:"render",value:function(){var e=this.state.dropdownOpen;return Object(b.jsxs)("div",{className:"account-container",ref:this.accountRef,children:[Object(b.jsxs)("a",{className:"account",href:"account options",onClick:this.toggleDropdown,children:[Object(b.jsx)("div",{className:"avatar-container",children:Object(b.jsx)("img",{src:"/images/avatar.svg",alt:"avatar"})}),Object(b.jsx)("img",{src:"/images/down arrow.svg",alt:"down arrrow"})]}),e?Object(b.jsx)(z,{}):null]})}}]),a}(r.Component);var q=function(){return Object(b.jsx)(r.Fragment,{children:S.isSignedin()?Object(b.jsx)(V,{}):Object(b.jsx)(T,{from:"/"})})};var B=function(e){var t=e.pageNumber,a=e.isActive,r=e.updateCurrentPage;return Object(b.jsx)("li",{children:Object(b.jsx)("button",{className:"page page--clickable".concat(a?" active-page":""),onClick:function(e){e.preventDefault(),r(t)},children:t})})};var H=function(e){var t=e.updateCurrentPage,a=e.currentPage,r=e.isDisabled;return Object(b.jsx)("li",{children:Object(b.jsx)("button",{className:"page".concat(r?"":" page--clickable"),onClick:function(){return t(a-1)},disabled:r,style:{cursor:"".concat(r?"auto":"pointer")},children:Object(b.jsx)("img",{src:"/images/left_arrow.svg",alt:"left arrow"})})})};var Y=function(e){var t=e.updateCurrentPage,a=e.currentPage,r=e.isDisabled;return Object(b.jsx)("li",{children:Object(b.jsx)("button",{className:"page".concat(r?"":" page--clickable"),onClick:function(){return t(a+1)},disabled:r,style:{cursor:"".concat(r?"auto":"pointer")},children:Object(b.jsx)("img",{src:"/images/right_arrow.svg",alt:"right arrow"})})})};var G=function(e){var t=e.currentPage,a=e.totalPages,r=e.updateCurrentPage;return Object(b.jsxs)("ul",{className:"pages__list",children:[Object(b.jsx)(H,{isDisabled:1===t,currentPage:t,updateCurrentPage:r}),function(){var e=[];if(t+2<=a)for(var r=t;r<=t+2;r++)e.push(r);else for(var s=a-2;s<=a;s++)s>0&&e.push(s);return e}().map((function(e){return Object(b.jsx)(B,{pageNumber:e,updateCurrentPage:r,isActive:e===t},Object(U.a)())})),Object(b.jsx)(Y,{isDisabled:t===a,currentPage:t,updateCurrentPage:r})]})};var J=function(e){var t=e.currentPage,a=e.totalItems,r=e.itemsPerPage,s=e.updateCurrentPage,n=function(){return Math.ceil(a/r)};return Object(b.jsxs)("div",{className:"pages",children:[Object(b.jsx)(G,{currentPage:t,totalPages:n(),updateCurrentPage:s}),Object(b.jsxs)("p",{className:"pages__info",children:["Page ",t," of"," ",Object(b.jsx)("span",{className:"pages__info__total-pages",children:n()})]})]})};var K=function(e){var t=e.softwares,a=e.setSoftwareSearchString,s=e.onWait,n=e.updateCurrentPage,i=e.currentPage,c=e.softwaresPerPage,o=Object(r.createRef)(),l=function(){return o.current.value=""},u=function(){return(i-1)*c},d=t.slice(u(),u()+c);return Object(b.jsxs)(r.Fragment,{children:[Object(b.jsx)("header",{className:"main-header",children:Object(b.jsxs)("div",{className:"main-header__flex main-wrapper wrapper",children:[Object(b.jsx)(v.b,{className:"home-link",to:"/",onClick:function(){a(""),l()},children:"Home"}),Object(b.jsx)(q,{})]})}),Object(b.jsxs)("div",{className:"wrapper main-wrapper",children:[Object(b.jsx)(_,{setSoftwareSearchString:a,softwareSearchInput:o}),s?Object(b.jsx)(m,{}):0===d.length?Object(b.jsx)("p",{className:"no-results-msg",children:"No results!"}):Object(b.jsxs)(r.Fragment,{children:[Object(b.jsx)("ul",{className:"softwares-list",children:d.map((function(e){return Object(b.jsx)(W,{software:e},Object(U.a)())}))}),Object(b.jsx)(J,{totalItems:t.length,itemsPerPage:c,currentPage:i,updateCurrentPage:n})]})]})]})},Q=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={currentPage:1,softwareSearchString:""},r.data={softwaresPerPage:20},r.setSoftwareSearchString=r.setSoftwareSearchString.bind(Object(u.a)(r)),r.updateCurrentPage=r.updateCurrentPage.bind(Object(u.a)(r)),r}return Object(l.a)(a,[{key:"updateCurrentPage",value:function(e){this.setState({currentPage:e})}},{key:"setSoftwareSearchString",value:function(e){this.setState({softwareSearchString:e,currentPage:1})}},{key:"getFilteredSoftwares",value:function(){var e=this.state.softwareSearchString,t=this.props.softwares;return""===e?t:t.filter((function(t){return t.name.toLocaleLowerCase().includes(e.toLocaleLowerCase())}))}},{key:"render",value:function(){var e=this.props.onWait,t=this.state.currentPage,a=this.data.softwaresPerPage;return Object(b.jsx)(K,{softwares:this.getFilteredSoftwares(),setSoftwareSearchString:this.setSoftwareSearchString,onWait:e,updateCurrentPage:this.updateCurrentPage,currentPage:t,softwaresPerPage:a})}}]),a}(r.Component);var Z=function(){return Object(b.jsx)("div",{className:"not-found-wrapper",children:Object(b.jsxs)("section",{children:[Object(b.jsx)("h1",{className:"not-found-h",children:"404 "}),Object(b.jsxs)("p",{className:"not-found-para",children:["Page Not Found. We could not find your requested URL. Click"," ",Object(b.jsx)(v.b,{className:"back-link--text",to:"/",children:"here"})," ","to return to home page"]}),Object(b.jsx)(v.b,{className:"back-link--btn",to:"/",children:"Back to home"})]})})},X=a(32),$=a.n(X),ee=a(36),te=new(function(){function e(){Object(o.a)(this,e),this.softwaresRef=p.collection("Softwares"),this.usersRef=p.collection("Users")}return Object(l.a)(e,[{key:"bindUpdaterToReview",value:function(e,t){this.softwaresRef.doc(e).collection("Reviews").doc(S.id).onSnapshot((function(e){t()}))}},{key:"getSoftwares",value:function(e){var t=[];this.softwaresRef.get().then((function(a){a.forEach((function(e){t.push(Object(c.a)({id:e.id},e.data()))})),e(t)})).catch((function(e){return console.log("Error: ",e)}))}},{key:"getReviews",value:function(e,t){var a=[];this.softwaresRef.doc(e).collection("Reviews").orderBy("date","desc").get().then((function(e){e.forEach((function(e){""!==e.data().review&&a.push(Object(c.a)(Object(c.a)({id:e.id},e.data()),{},{date:x(e.data().date.toDate())}))})),t(a)})).catch((function(e){return console.log("Error: ",e)}))}},{key:"getSoftware",value:function(e,t){this.softwaresRef.doc(e).get().then((function(e){t(Object(c.a)(Object(c.a)({},e.data()),{},{id:e.id}))})).catch((function(e){return console.log("Error: ",e)}))}},{key:"writeRating",value:function(e,t){return this.softwaresRef.doc(e).collection("Reviews").doc(S.id).set(Object(c.a)(Object(c.a)({},t),{},{date:w.a.firestore.Timestamp.now()}))}},{key:"incrementTotalReviews",value:function(e){return this.softwaresRef.doc(e).update({total_reviews:w.a.firestore.FieldValue.increment(1)})}},{key:"decrementTotalReviews",value:function(e){return this.softwaresRef.doc(e).update({total_reviews:w.a.firestore.FieldValue.increment(-1)})}},{key:"updateStarCount",value:function(e,t,a){return this.softwaresRef.doc(e).update(Object(g.a)({},"stars_count."+t,"INC"===a?w.a.firestore.FieldValue.increment(1):w.a.firestore.FieldValue.increment(-1)))}},{key:"replaceStarCount",value:function(){var e=Object(ee.a)($.a.mark((function e(t,a,r){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.softwaresRef.doc(t).update(Object(g.a)({},"stars_count."+a,w.a.firestore.FieldValue.increment(1)));case 2:return e.next=4,this.softwaresRef.doc(t).update(Object(g.a)({},"stars_count."+r,w.a.firestore.FieldValue.increment(-1)));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t,a,r){return e.apply(this,arguments)}}()},{key:"updateAverageRating",value:function(e){var t=this;return this.softwaresRef.doc(e).get().then((function(e){return function(e){var t=0,a=0;return Object.keys(e).forEach((function(r){t+=Number.parseInt(r)*e[r],a+=e[r]})),0===a?0:t/a}(e.data().stars_count)})).then((function(a){return t.softwaresRef.doc(e).update({average_rating:Number(a.toFixed(1))})}))}}]),e}());var ae=function(e){var t=e.total_reviews;return Object(b.jsxs)("div",{children:[Object(b.jsxs)("span",{className:"reviews-qty",children:[" ",t," "]}),Object(b.jsx)("span",{children:1===t||0===t?"Review":"Reviews"})]})};var re=function(e){var t=e.softwareID;return e.from,Object(b.jsx)(v.b,{className:"rate-link",to:S.isSignedin()?{pathname:"/software_details/".concat(t,"/rate")}:{pathname:"/signin",state:{from:"/software_details/".concat(t)}},children:"Rate this app"})};var se=function(e){var t=e.name,a=e.developer,r=e.average_rating,s=e.total_reviews,n=e.id;return Object(b.jsxs)("section",{className:"software",children:[Object(b.jsx)(I,{name:t,developer:a}),Object(b.jsxs)("div",{className:"feedback-content",children:[Object(b.jsxs)("div",{className:"feedback",children:[Object(b.jsxs)("div",{className:"feedback__rating",children:[Object(b.jsx)("span",{className:"rating-qty",children:r}),Object(b.jsx)("img",{src:"/images/red star.svg",alt:"red star"})]}),Object(b.jsx)("span",{children:" | "}),Object(b.jsx)("div",{className:"feedback__reviews",children:Object(b.jsx)(ae,{total_reviews:s})})]}),Object(b.jsx)(re,{softwareID:n})]})]})};var ne=function(e){var t=e.description;return Object(b.jsxs)("div",{className:"software-description",children:[Object(b.jsx)("h2",{children:"Description"}),Object(b.jsx)("p",{children:t})]})};var ie=function(e){var t=e.ratingQty,a=e.ratingPercentage;return Object(b.jsx)("div",{children:Object(b.jsxs)("li",{className:"rating",children:[Object(b.jsxs)("div",{className:"rating__type",children:[Object(b.jsx)("span",{className:"rating-qty",children:t}),Object(b.jsx)("img",{src:"/images/red star.svg",alt:"red star"})]}),Object(b.jsx)("div",{className:"rating__growth",children:Object(b.jsx)("div",{className:"rating__growth__line",style:{width:"".concat(a,"%")}})})]})})};var ce=function(e){var t=e.totalStars,a=e.stars_count;return Object(b.jsx)("ul",{className:"ratings-list",children:Object.keys(a).map((function(e){return Object(b.jsx)(ie,{ratingPercentage:(r=a[e],0===t?0:r/t*100),ratingQty:e},Object(U.a)());var r}))})};var oe=function(e){var t=e.average_rating,a=e.stars_count;return Object(b.jsxs)("div",{className:"software-rating",children:[Object(b.jsx)("h2",{children:"Rating"}),Object(b.jsxs)("div",{className:"average-rating",children:[Object(b.jsx)("span",{className:"rating-qty",children:t}),Object(b.jsx)(E,{averageRating:t})]}),Object(b.jsx)(ce,{totalStars:function(){var e=0;return Object.keys(a).forEach((function(t){e+=a[t]})),e}(),stars_count:a})]})};var le=function(e){var t=e.review,a=e.maxLength,r=e.maxLengthDifference,s=e.softwareID,n=e.fromSoftwareDetailsPage,i=e.noReviewsPage,c=t.review.length-a;return Object(b.jsxs)("li",{className:"review",children:[Object(b.jsxs)("div",{className:"review__info",children:[Object(b.jsx)("span",{className:"reviewer"}),t.username,Object(b.jsx)("span",{className:"review-date",children:t.date})]}),Object(b.jsxs)("div",{className:"review__rating-type",children:[Object(b.jsx)("span",{className:"rating-qty",children:t.rating}),Object(b.jsx)("img",{src:"/images/red star.svg",alt:"red star"})]}),Object(b.jsx)("p",{className:"review__para",children:c>r?"".concat(t.review.slice(0,a)," ...."):t.review}),c>r?Object(b.jsx)(v.b,{className:"see-more-link",to:{pathname:"/software_details/".concat(s,"/reviews/").concat(t.id),state:{fromSoftwareDetailsPage:n,noReviewsPage:i}},children:"See more"}):null]})};var ue=function(e){var t=e.reviews,a=e.softwareID,r=e.fromSoftwareDetailsPage,s=e.noReviewsPage,n={maxLength:300,maxLengthDifference:100};return Object(b.jsx)("ul",{className:"reviews__list",children:t.map((function(e){return Object(b.jsx)(le,Object(c.a)(Object(c.a)({review:e},n),{},{softwareID:a,fromSoftwareDetailsPage:r||!1,noReviewsPage:s||!1}),Object(U.a)())}))})};var de=function(e){var t=e.softwareID;return Object(b.jsxs)(v.b,{className:"reviews-link",to:"/software_details/".concat(t,"/reviews"),children:[" ","See all reviews"]})};var he=function(e){var t=e.software,a=e.reviews;return Object(b.jsxs)("section",{className:"reviews",children:[Object(b.jsx)("h2",{className:"reviews-heading",children:"Reviews"}),Object(b.jsx)("p",{className:"ask-for-review-para",children:"Write a review by rating this app"}),Object(b.jsx)(re,{softwareID:t.id}),Object(b.jsxs)("div",{className:"review-feedback-content",children:[Object(b.jsx)(ae,{total_reviews:t.total_reviews}),t.total_reviews<=3?null:Object(b.jsx)(de,{softwareID:t.id})]}),Object(b.jsx)(ue,{reviews:a.slice(0,3),softwareID:t.id,fromSoftwareDetailsPage:!0,noReviewsPage:a.length<=3}),t.total_reviews<=3?null:Object(b.jsx)(de,{softwareID:t.id})]})};var je=function(e){var t=e.software,a=t.name,r=t.developer,s=t.average_rating,n=t.total_reviews,i=t.stars_count,c=t.id,o=t.description,l=e.reviews,u=e.reviewsFetched;return Object(b.jsxs)("div",{className:"wrapper software-details-wrapper",children:[Object(b.jsxs)("div",{className:"breadcrumbs",children:[Object(b.jsx)(f,{isActive:!1}),Object(b.jsx)("span",{children:" \\ "}),Object(b.jsx)(v.b,{className:"page-link active-page-link",to:"/software_details/".concat(c),children:a})]}),Object(b.jsx)(se,{name:a,developer:r,average_rating:s,total_reviews:n,id:c}),Object(b.jsxs)("section",{className:"software-description-and-rating",children:[Object(b.jsx)(ne,{description:o}),Object(b.jsx)(oe,{average_rating:s,stars_count:i})]}),u?Object(b.jsx)(he,{software:{name:a,developer:r,total_reviews:n,id:c},reviews:l}):null]})},ve=s.a.createContext();var be=function(e){var t=e.softwareID;return Object(b.jsx)("div",{className:"already-rated-modal-wrapper",children:Object(b.jsxs)("section",{className:"already-rated-modal",children:[Object(b.jsx)("p",{children:"You have already rated this software. Go to ratings page to edit your rating."}),Object(b.jsxs)("div",{className:"cta-btns",children:[Object(b.jsx)(v.b,{className:"exit-btn",to:"/software_details/".concat(t),children:"Exit"}),Object(b.jsx)(v.b,{className:"edit-btn",to:"/rated_apps",children:"Edit ratings"})]})]})})};var fe=function(e){var t=e.softwareID,a=e.setCanUserReview,r=function(){return a(!1)};return Object(b.jsx)("div",{className:"confirmation-modal-overlay",children:Object(b.jsxs)("div",{className:"confirmation-modal",children:[Object(b.jsx)("p",{children:"Feedback submitted!"}),Object(b.jsxs)("div",{className:"confirmation-modal__buttons",children:[Object(b.jsx)(v.b,{to:"/",onClick:r,children:"Home"}),Object(b.jsx)(v.b,{to:"/software_details/".concat(t),onClick:r,children:"Go Back"})]})]})})};var me=function(e){var t=e.setRating,a=e.starNumber,r=e.starType;return Object(b.jsx)("li",{children:Object(b.jsx)("a",{href:"a",onClick:function(e){e.preventDefault(),t(a)},children:Object(b.jsx)("img",{className:"star",src:"/images/".concat(r," star.svg"),alt:"".concat(r," star")})})})};var ge=function(e){var t=e.rating,a=e.setRating;return Object(b.jsx)("ul",{className:"stars-list",children:function(){for(var e=[],a=0;a<t;a++)e.push("red");for(var r=t;r<5;r++)e.push("white");return e}().map((function(e,t){return Object(b.jsx)(me,{setRating:a,starType:e,starNumber:t+1},Object(U.a)())}))})};var we=function(e){return Object(b.jsxs)("div",{className:"rate",children:[Object(b.jsxs)("h2",{children:["Rate ",Object(b.jsx)("span",{className:"required-arterisk",children:"*"})]}),Object(b.jsx)(ge,Object(c.a)({},e))]})};var pe=function(e){var t=e.maxReviewLength;return Object(b.jsxs)("p",{className:"review-limit-msg",children:["* Reached max characters (",t,") for review."]})},Oe=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={review:"",rating:0,onWait:!1},r.data={maxReviewLength:3e3},r.handleChange=r.handleChange.bind(Object(u.a)(r)),r.handleSubmit=r.handleSubmit.bind(Object(u.a)(r)),r.setRating=r.setRating.bind(Object(u.a)(r)),r.saveData=r.saveData.bind(Object(u.a)(r)),r.addSoftwareToUserReviews=r.addSoftwareToUserReviews.bind(Object(u.a)(r)),r.incrementTotalReviews=r.incrementTotalReviews.bind(Object(u.a)(r)),r.incrementStarCount=r.incrementStarCount.bind(Object(u.a)(r)),r.updateAverageRating=r.updateAverageRating.bind(Object(u.a)(r)),r.afterSave=r.afterSave.bind(Object(u.a)(r)),r}return Object(l.a)(a,[{key:"handleChange",value:function(e){e.preventDefault(),this.setState(Object(g.a)({},e.target.name,e.target.value))}},{key:"setRating",value:function(e){this.setState({rating:e})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.wait()}},{key:"wait",value:function(){this.setState({onWait:!0},this.saveData)}},{key:"saveData",value:function(){var e=this.state,t=e.rating,a=e.review,r=this.props.softwareID;te.writeRating(r,{username:S.name,rating:t,review:a}).then(this.addSoftwareToUserReviews),""===a?this.incrementStarCount():this.incrementTotalReviews()}},{key:"addSoftwareToUserReviews",value:function(){var e=this.props,t=e.softwareID,a=e.getUpdatedUserReviews;S.addSoftwareToReviews(t).then((function(){a(),S.bindUpdaterToReviews(a)}))}},{key:"incrementTotalReviews",value:function(){var e=this.props.softwareID;te.incrementTotalReviews(e).then(this.incrementStarCount)}},{key:"incrementStarCount",value:function(){var e=this.props.softwareID,t=this.state.rating;te.updateStarCount(e,t,"INC").then(this.updateAverageRating)}},{key:"updateAverageRating",value:function(){var e=this.props.softwareID;te.updateAverageRating(e).then(this.afterSave)}},{key:"afterSave",value:function(){var e=this.props,t=e.showConfirmationModal;(0,e.updateSoftware)(e.softwareID),this.setState({review:"",rating:0,onWait:!1},t)}},{key:"isIncomplete",value:function(){var e=this.state,t=e.rating,a=e.review,r=this.data.maxReviewLength;return 0===t||a.length>=r}},{key:"render",value:function(){var e=this.state,t=e.rating,a=e.review,r=e.onWait,s=this.data.maxReviewLength;return Object(b.jsxs)("form",{className:"review-form",onSubmit:this.handleSubmit,children:[Object(b.jsx)(we,{setRating:this.setRating,rating:t}),Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{htmlFor:"review",children:"Review (optional) "}),a.length>=s?Object(b.jsx)(pe,{maxReviewLength:s}):null,Object(b.jsx)("textarea",{name:"review",id:"review",placeholder:"Tell us your experience with the app",onChange:this.handleChange,value:a,maxLength:s})]}),Object(b.jsx)("button",{type:"submit",className:"submit-btn".concat(this.isIncomplete()?" submit-btn--disabled":""),children:"Submit"}),r?Object(b.jsx)(m,{}):null]})}}]),a}(r.Component);var xe=function(e){var t=e.name,a=e.developer;return Object(b.jsx)("section",{className:"software",children:Object(b.jsx)(I,{name:t,developer:a})})},Se=s.a.createContext(),Re=s.a.createContext();var ke=function(e){var t=e.name,a=e.developer,r=e.id,s=e.formSubmitted,n=e.setCanUserReview,i=e.showConfirmationModal;return Object(b.jsxs)("div",{className:"wrapper rate-wrapper",children:[Object(b.jsxs)("div",{className:"breadcrumbs",children:[Object(b.jsx)(f,{isActive:!1}),Object(b.jsx)("span",{children:" \\ "}),Object(b.jsx)(v.b,{className:"page-link",to:"/software_details/".concat(r),children:t}),Object(b.jsx)("span",{children:" \\ "}),Object(b.jsx)(v.b,{className:"page-link active-page-link",to:"/software_details/".concat(r,"/rate"),children:"Rate"})]}),Object(b.jsx)(xe,{name:t,developer:a}),Object(b.jsx)(Se.Consumer,{children:function(e){var t=e.getUpdatedUserReviews;return Object(b.jsx)(Re.Consumer,{children:function(e){return Object(b.jsx)(Oe,{showConfirmationModal:i,softwareID:r,getUpdatedUserReviews:t,updateSoftware:e})}})}}),s?Object(b.jsx)(fe,{softwareID:r,setCanUserReview:n}):null]})},ye=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={formSubmitted:!1},r.showConfirmationModal=r.showConfirmationModal.bind(Object(u.a)(r)),r}return Object(l.a)(a,[{key:"showConfirmationModal",value:function(){this.setState({formSubmitted:!0})}},{key:"render",value:function(){var e=this,t=this.props.software,a=t.name,r=t.developer,s=t.id,n=this.state.formSubmitted;return Object(b.jsx)(ve.Consumer,{children:function(t){return t.canUserReview?Object(b.jsx)(ke,{name:a,id:s,developer:r,formSubmitted:n,showConfirmationModal:e.showConfirmationModal,setCanUserReview:t.setCanUserReview}):Object(b.jsx)(be,{softwareID:s})}})}}]),a}(r.Component);var Ne=function(e){return Object(b.jsx)("section",{className:"software",children:Object(b.jsx)(I,Object(c.a)({},e))})},Ce=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={category:"all"},r.handleChange=r.handleChange.bind(Object(u.a)(r)),r}return Object(l.a)(a,[{key:"handleChange",value:function(e){this.setState(Object(g.a)({},e.target.name,e.target.value),this.filterReviews)}},{key:"filterReviews",value:function(){var e=this.state.category;this.props.filterReviews(e)}},{key:"render",value:function(){return Object(b.jsx)("form",{className:"filter-rating-form",children:Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{htmlFor:"category",children:"Stars"}),Object(b.jsxs)("select",{name:"category",id:"category",onChange:this.handleChange,value:this.state.category,children:[Object(b.jsx)("option",{value:"all",children:"All"}),Object(b.jsx)("option",{value:"5",children:"5 \xa0\xa0 \u2605 \u2605 \u2605 \u2605 \u2605"}),Object(b.jsx)("option",{value:"4",children:"4 \xa0\xa0 \u2605 \u2605 \u2605 \u2605"}),Object(b.jsx)("option",{value:"3",children:"3 \xa0\xa0 \u2605 \u2605 \u2605"}),Object(b.jsx)("option",{value:"2",children:"2 \xa0\xa0 \u2605 \u2605"}),Object(b.jsx)("option",{value:"1",children:"1 \xa0\xa0 \u2605"})]})]})})}}]),a}(r.Component);var Pe=function(e){var t=e.filterReviews,a=e.total_reviews;return Object(b.jsxs)("div",{className:"reviews__info",children:[Object(b.jsx)(ae,{total_reviews:a}),Object(b.jsx)(Ce,{filterReviews:t})]})},_e=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={currentPage:1,star:"all",reviews:r.props.reviews},r.data={reviewsPerPage:12},r.filterReviews=r.filterReviews.bind(Object(u.a)(r)),r.updateCurrentPage=r.updateCurrentPage.bind(Object(u.a)(r)),r}return Object(l.a)(a,[{key:"updateCurrentPage",value:function(e){this.setState({currentPage:e})}},{key:"filterReviews",value:function(e){var t=this.props.reviews;this.setState((function(a){return{reviews:"all"===e?t:t.filter((function(t){return t.rating===Number.parseInt(e)})),currentPage:1}}))}},{key:"getReviewsForCurrentPage",value:function(){var e=this.state.reviews,t=this.data.reviewsPerPage;return e.slice(this.getInitialReviewIndexForCurrentPage(),this.getInitialReviewIndexForCurrentPage()+t)}},{key:"getInitialReviewIndexForCurrentPage",value:function(){var e=this.data.reviewsPerPage;return(this.state.currentPage-1)*e}},{key:"render",value:function(){var e=this.props.software,t=this.state.reviews,a=this.data.reviewsPerPage;return Object(b.jsxs)("div",{className:"wrapper reviews-wrapper",children:[Object(b.jsxs)("div",{className:"breadcrumbs",children:[Object(b.jsx)(f,{isActive:!1}),Object(b.jsx)("span",{children:" \\ "}),Object(b.jsx)(v.b,{className:"page-link",to:"/software_details/".concat(e.id),children:e.name}),Object(b.jsx)("span",{children:" \\ "}),Object(b.jsx)(v.b,{className:"page-link active-page-link",to:"/software_details/".concat(e.id,"/reviews"),children:"Reviews"})]}),Object(b.jsx)(Ne,{name:e.name,developer:e.developer}),Object(b.jsxs)("section",{className:"reviews",children:[Object(b.jsx)("h2",{className:"reviews-heading",children:"Reviews"}),Object(b.jsx)("p",{className:"ask-for-review-para",children:"Write a review by rating this app"}),Object(b.jsx)(re,{softwareID:e.id}),Object(b.jsx)(Pe,{filterReviews:this.filterReviews,total_reviews:t.length}),Object(b.jsx)(ue,{reviews:this.getReviewsForCurrentPage(),softwareID:e.id}),0===t.length?null:Object(b.jsx)(J,{totalItems:t.length,itemsPerPage:a,currentPage:this.state.currentPage,updateCurrentPage:this.updateCurrentPage})]})]})}}]),a}(r.Component);var De=function(e){var t=e.review,a=e.fromSoftwareDetailsPage,s=e.software,n=e.noReviewsPage,i=s.name,c=s.developer,o=s.id;return Object(b.jsxs)("div",{className:"wrapper review-wrapper",children:[Object(b.jsxs)("div",{className:"breadcrumbs",children:[Object(b.jsx)(f,{isActive:!1}),Object(b.jsx)("span",{children:" \\ "}),Object(b.jsx)(v.b,{className:"page-link",to:"/software_details/".concat(o),children:i}),Object(b.jsx)("span",{children:" \\ "}),n?null:Object(b.jsxs)(r.Fragment,{children:[Object(b.jsxs)(v.b,{className:"page-link",to:"/software_details/".concat(o,"/reviews"),children:[" ","Reviews"]}),Object(b.jsx)("span",{children:" \\ "})]}),Object(b.jsxs)(v.b,{className:"page-link active-page-link",to:{pathname:"/software_details/".concat(o,"/reviews/").concat(t.id),state:{fromSoftwareDetailsPage:a||!1,noReviewsPage:n||!1}},children:[" ","Review"]})]}),Object(b.jsx)("section",{className:"software",children:Object(b.jsx)(I,{name:i,developer:c})}),Object(b.jsxs)(v.b,{className:"back-link",to:"".concat(a?"/software_details/".concat(o):"/software_details/".concat(o,"/reviews")),children:[Object(b.jsx)("img",{src:"/images/back arrow.svg",alt:"back arrow"})," ",Object(b.jsx)("span",{children:"Back"})]}),Object(b.jsx)(le,{review:t})]})};var Ue=function(e){var t=function(t){return e.reviews.find((function(e){return e.id===t}))},a=e.software;return Object(b.jsxs)(j.d,{children:[Object(b.jsx)(j.b,{path:"/software_details/:id/reviews",exact:!0,render:function(){return Object(b.jsx)(_e,Object(c.a)({},e))}}),Object(b.jsx)(j.b,{path:"/software_details/:id/reviews/:userID",exact:!0,render:function(e){var r=e.match.params.userID,s=e.location.state,n=s.fromSoftwareDetailsPage,i=s.noReviewsPage;return Object(b.jsx)(De,{software:a,review:t(r),fromSoftwareDetailsPage:n||!1,noReviewsPage:i||!1})}})]})};var Ee=function(e){var t=e.reviews,a=e.software;return Object(b.jsxs)(j.d,{children:[Object(b.jsx)(j.b,{path:"/software_details/:id/reviews",render:function(){return Object(b.jsx)(Ue,{software:a,reviews:t})}}),Object(b.jsx)(j.b,{path:"/software_details/:id/rate",exact:!0,render:function(){return Object(b.jsx)(ye,{software:a})}}),Object(b.jsx)(j.b,{path:"/software_details/:id",exact:!0,render:function(){return Object(b.jsx)(je,Object(c.a)({},e))}})]})},Me=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={reviews:[],reviewsFetched:!1,canUserReview:!1},r.getReviews=r.getReviews.bind(Object(u.a)(r)),r.setCanUserReview=r.setCanUserReview.bind(Object(u.a)(r)),r}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.getReviews();var t=this.props.software.id;S.isSignedin()&&S.canReview(t).then((function(t){return e.setCanUserReview(t)}))}},{key:"setCanUserReview",value:function(e){var t=this.props.software.id;e&&te.bindUpdaterToReview(t,this.getReviews),this.setState({canUserReview:e})}},{key:"getReviews",value:function(){var e=this;this.waitForReviews();var t=this.props.software.id;te.getReviews(t,(function(t){e.setState({reviews:t,reviewsFetched:!0})}))}},{key:"waitForReviews",value:function(){this.setState({reviewsFetched:!1})}},{key:"render",value:function(){return Object(b.jsx)(ve.Provider,{value:{canUserReview:this.state.canUserReview,setCanUserReview:this.setCanUserReview},children:Object(b.jsx)(Ee,Object(c.a)(Object(c.a)({},this.props),this.state))})}}]),a}(r.Component);var Fe=function(){return Object(b.jsx)("p",{className:"no-ratings-msg",children:"No ratings to show"})};var Ie=function(e){var t=e.reset,a=e.handleSubmit;return Object(b.jsxs)("div",{className:"past-review__ctas",children:[Object(b.jsx)("a",{href:"cancel",className:"cancel-btn",onClick:function(e){e.preventDefault(),t()},children:"Cancel"}),Object(b.jsx)("a",{href:"save",className:"save-btn",onClick:function(e){e.preventDefault(),a()},children:"Save"})]})};var We=function(e){var t=e.setEditable,a=e.handleDelete,r=e.clickable;return Object(b.jsxs)("div",{className:"past-review__ctas",children:[Object(b.jsxs)("a",{href:"edit",className:"edit-btn tooltip",onClick:function(e){e.preventDefault(),t(!0)},children:[Object(b.jsx)("img",{src:"/images/edit.svg",alt:"pencil"}),Object(b.jsx)("span",{className:"tooltip-text",children:"Edit"})]}),Object(b.jsxs)("a",{href:"delete",className:"delete-btn tooltip",onClick:function(e){e.preventDefault(),a()},children:[Object(b.jsx)("img",{src:"/images/delete.svg",alt:"dustbin"}),Object(b.jsx)("span",{className:"tooltip-text",children:"Delete"})]}),r?null:Object(b.jsx)("div",{className:"past-review__ctas__wrapper",children:" "})]})};var Te=function(e){var t=e.review,a=e.rating,r=e.handleChange,s=e.editable,n=e.setRating;return Object(b.jsxs)("form",{className:"past-review__form",children:[Object(b.jsxs)("div",{className:"stars-list-parent",children:[Object(b.jsx)(ge,{rating:a,setRating:n}),Object(b.jsx)("div",{className:s?"":"stars-list-cover"})]}),Object(b.jsx)("textarea",{className:"past-review__text",name:"review",value:t,onChange:r,disabled:!s})]})},Le=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;Object(o.a)(this,a);var s=(r=t.call(this,e)).props.userReview,n=s.rating,i=s.review;return r.state={rating:n,review:i,editable:!1,error:!1,clickable:!0},r.handleChange=r.handleChange.bind(Object(u.a)(r)),r.handleSubmit=r.handleSubmit.bind(Object(u.a)(r)),r.setRating=r.setRating.bind(Object(u.a)(r)),r.setEditable=r.setEditable.bind(Object(u.a)(r)),r.reset=r.reset.bind(Object(u.a)(r)),r.hideNoChangeMessage=r.hideNoChangeMessage.bind(Object(u.a)(r)),r.handleDelete=r.handleDelete.bind(Object(u.a)(r)),r.updateSoftware=r.updateSoftware.bind(Object(u.a)(r)),r.updateStarCount=r.updateStarCount.bind(Object(u.a)(r)),r.updateSoftwareLocal=r.updateSoftwareLocal.bind(Object(u.a)(r)),r}return Object(l.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,r=t.value;this.setState(Object(g.a)({},a,r))}},{key:"handleSubmit",value:function(){if(this.reviewUpdated()){var e=this.props.userReview.softwareID,t=this.state,a=t.rating,r=t.review;S.updateReview(e,{rating:a,review:r}),this.updateSoftware()}else this.showNoChangeMessage()}},{key:"reviewUpdated",value:function(){var e=this.state,t=e.review,a=e.rating,r=this.props.userReview;return t!==r.review||a!==r.rating}},{key:"updateSoftware",value:function(){this.updateTotalReviews().then(this.updateStarCount).then(this.updateSoftwareLocal).catch((function(e){return console.log(e)}))}},{key:"updateTotalReviews",value:function(){var e=this.props.userReview.softwareID;return this.shouldDecrementTotalReviews()?te.decrementTotalReviews(e):this.shouldIncrementTotalReviews()?te.incrementTotalReviews(e):Promise.resolve()}},{key:"shouldDecrementTotalReviews",value:function(){var e=this.state.review;return""===e&&e!==this.props.userReview.review}},{key:"shouldIncrementTotalReviews",value:function(){return""!==this.state.review&&""===this.props.userReview.review}},{key:"updateStarCount",value:function(){if(this.shouldChangeStarCount()){var e=this.props.userReview.softwareID,t=this.state.rating;return te.replaceStarCount(e,t,this.props.userReview.rating).then((function(){return te.updateAverageRating(e)}))}return Promise.resolve()}},{key:"shouldChangeStarCount",value:function(){return this.state.rating!==this.props.userReview.rating}},{key:"updateSoftwareLocal",value:function(){var e=this.props.userReview.softwareID;this.props.updateSoftware(e)}},{key:"handleDelete",value:function(){this.setState({clickable:!1},this.deleteReview)}},{key:"deleteReview",value:function(){var e=this,t=this.state,a=t.rating,r=t.review,s=this.props.userReview.softwareID,n=this.props.getUpdatedUserReviews;S.deleteReview(s).then((function(){n(),""!==r&&te.decrementTotalReviews(s),te.updateStarCount(s,a,"DEC").then((function(){return te.updateAverageRating(s)})).then(e.updateSoftwareLocal)}))}},{key:"setRating",value:function(e){this.setState({rating:e})}},{key:"setEditable",value:function(e){this.setState({editable:e})}},{key:"showNoChangeMessage",value:function(){var e=this;this.setState({error:!0},(function(){return setTimeout(e.hideNoChangeMessage,3e3)}))}},{key:"hideNoChangeMessage",value:function(){this.setState({error:!1})}},{key:"reset",value:function(){var e=this.props.userReview,t=e.rating,a=e.review;this.setState({rating:t,review:a,editable:!1})}},{key:"render",value:function(){var e=this.props.userReview,t=e.date,a=e.softwareName,r=this.state,s=r.editable,n=r.rating,i=r.review,c=r.error,o=r.clickable;return Object(b.jsxs)("li",{className:"past-review",children:[Object(b.jsxs)("div",{className:"past-review__basic-info-and-ctas",children:[Object(b.jsxs)("div",{className:"past-review__software",children:[Object(b.jsx)(F,{name:a}),Object(b.jsxs)("div",{className:"software__details",children:[Object(b.jsx)("p",{className:"software__name",children:a}),Object(b.jsx)("p",{className:"software__review-date",children:t})]})]}),s?Object(b.jsx)(Ie,{reset:this.reset,handleSubmit:this.handleSubmit}):Object(b.jsx)(We,{setEditable:this.setEditable,handleDelete:this.handleDelete,clickable:o})]}),c?Object(b.jsx)("p",{className:"no-change-msg",children:"* No change To update"}):null,Object(b.jsx)(Te,{rating:n,review:i,editable:s,handleChange:this.handleChange,setRating:this.setRating,textInputRef:this.textInputRef})]})}}]),a}(r.Component);var Ae=function(e){var t=e.userReviews,a=e.fetchingUserReviews,s=e.getUpdatedUserReviews;return Object(b.jsx)(r.Fragment,{children:a?Object(b.jsx)(m,{}):Object(b.jsx)("ul",{className:"past-reviews-list",children:Object(b.jsx)(Re.Consumer,{children:function(e){return t.map((function(t){return Object(b.jsx)(Le,{userReview:t,updateSoftware:e,getUpdatedUserReviews:s},Object(U.a)())}))}})})})};var ze=function(e){var t=e.userReviews,a=e.fetchingUserReviews,s=e.getUpdatedUserReviews,n=e.reviewsPerPage,i=e.currentPage,c=e.updateCurrentPage,o=e.totalReviews;return Object(b.jsxs)("div",{className:"wrapper rated-apps-wrapper",children:[Object(b.jsx)("header",{children:Object(b.jsxs)("div",{className:"breadcrumbs",children:[Object(b.jsx)(f,{}),Object(b.jsx)("span",{children:" \\ "}),Object(b.jsx)(v.b,{className:"page-link active-page-link",to:"/rated_apps",children:"Rated Apps"})]})}),0===t.length?Object(b.jsx)(Fe,{}):Object(b.jsxs)(r.Fragment,{children:[Object(b.jsx)("h1",{className:"ratings-h",children:"Your Ratings"}),Object(b.jsx)(Ae,{userReviews:t,getUpdatedUserReviews:s,fetchingUserReviews:a}),Object(b.jsx)(J,{totalItems:o,itemsPerPage:n,currentPage:i,updateCurrentPage:c})]})," "]})},Ve=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={currentPage:1},r.data={reviewsPerPage:7},r.updateCurrentPage=r.updateCurrentPage.bind(Object(u.a)(r)),r}return Object(l.a)(a,[{key:"updateCurrentPage",value:function(e){this.setState({currentPage:e})}},{key:"getReviewsForCurrentPage",value:function(){var e=this.props.userReviews,t=this.data.reviewsPerPage;return e.slice(this.getInitialReviewIndexForCurrentPage(),this.getInitialReviewIndexForCurrentPage()+t)}},{key:"getInitialReviewIndexForCurrentPage",value:function(){var e=this.data.reviewsPerPage;return(this.state.currentPage-1)*e}},{key:"render",value:function(){var e=this.state.currentPage,t=this.props,a=t.fetchingUserReviews,r=t.getUpdatedUserReviews,s=t.userReviews,n=this.data.reviewsPerPage;return Object(b.jsx)(ze,{reviewsPerPage:n,totalReviews:s.length,currentPage:e,updateCurrentPage:this.updateCurrentPage,fetchingUserReviews:a,getUpdatedUserReviews:r,userReviews:this.getReviewsForCurrentPage()})}}]),a}(r.Component);var qe=function(){return Object(b.jsx)(Se.Consumer,{children:function(e){return Object(b.jsx)(Ve,Object(c.a)({},e))}})};var Be=function(e){var t=e.error;return Object(b.jsxs)("p",{className:"gateway-form__error",children:["* ",t]})};var He=function(e){var t=e.from;return Object(b.jsxs)(v.b,{className:"back-link",to:t,children:[Object(b.jsx)("img",{src:"/images/back arrow.svg",alt:"back arrow"})," ",Object(b.jsx)("span",{children:"Back"})]})};var Ye=function(e){var t=e.email,a=e.password,r=e.handleChange,s=e.handleSubmit,n=e.hasError,i=e.errorMsg,c=e.onWait,o=e.from;return Object(b.jsxs)("div",{className:"gateway-wrapper",children:[Object(b.jsxs)("section",{className:"gateway-form-section",children:[Object(b.jsx)(He,{from:o}),Object(b.jsxs)("form",{className:"gateway-form",onSubmit:s,children:[Object(b.jsx)("h1",{className:"main-h",children:"Sign In"}),Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{htmlFor:"email",children:"Email"}),Object(b.jsx)("input",{type:"email",id:"email",name:"email",value:t,onChange:r})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{htmlFor:"password",children:"Password"}),Object(b.jsx)("input",{type:"password",id:"password",name:"password",value:a,onChange:r})]}),n?Object(b.jsx)(Be,{error:i}):null,Object(b.jsx)("input",{type:"submit",className:"submit-btn"})]}),Object(b.jsxs)("p",{className:"gateway-para",children:["Don\u2019t have an account?"," ",Object(b.jsxs)(v.b,{className:"signup-link",to:{pathname:"/signup",state:{from:o}},children:["Sign up"," "]})," ","instead."]})]}),c?Object(b.jsx)(m,{}):null]})},Ge=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={email:"",password:"",hasError:!1,errorMsg:"",onWait:!1,signedin:!1},r.handleChange=r.handleChange.bind(Object(u.a)(r)),r.handleSubmit=r.handleSubmit.bind(Object(u.a)(r)),r.onSignin=r.onSignin.bind(Object(u.a)(r)),r}return Object(l.a)(a,[{key:"handleSubmit",value:function(e){e.preventDefault(),this.validationCheck()?this.showError({msg:"Please fill all the form fields."}):this.signin()}},{key:"validationCheck",value:function(){var e=this.state,t=e.email,a=e.password;return""===t||""===a}},{key:"signin",value:function(){var e=this.state,t=e.email,a=e.password;L.signin({email:t,password:a},this.onSignin),this.setState({onWait:!0})}},{key:"onSignin",value:function(e){e?(L.signout(),this.showError(e)):this.setState({onWait:!1,hasError:!1,errorMsg:"",signedin:!0})}},{key:"showError",value:function(e){this.setState({onWait:!1,hasError:!0,errorMsg:e.msg})}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,r=t.value;this.setState(Object(g.a)({},a,r))}},{key:"render",value:function(){var e=this.props.from,t=this.state.signedin;return Object(b.jsxs)(r.Fragment,{children:[t?Object(b.jsx)(j.a,{to:"/"}):null,Object(b.jsx)(Ye,Object(c.a)(Object(c.a)({},this.state),{},{handleChange:this.handleChange,handleSubmit:this.handleSubmit,from:e}))]})}}]),a}(r.Component);var Je=function(e){var t=e.email;return Object(b.jsx)("div",{className:"email-verification-modal-wrapper",children:Object(b.jsxs)("section",{className:"email-verification-modal",children:[Object(b.jsxs)("p",{children:["We sent a verfication email to ",t,". You can signin after verification."]}),Object(b.jsxs)(v.b,{to:{pathname:"/signin",state:{from:"/"}},children:["Sign in"," "]})]})})};var Ke=function(e){var t=e.name,a=e.email,r=e.password,s=e.signedUp,n=e.hasError,i=e.errorMsg,c=e.onWait,o=e.handleChange,l=e.handleSubmit,u=e.from;return Object(b.jsxs)("div",{className:"gateway-wrapper",children:[Object(b.jsxs)("section",{className:"gateway-form-section",children:[Object(b.jsx)(He,{from:u}),Object(b.jsxs)("form",{className:"gateway-form",onSubmit:l,children:[Object(b.jsx)("h1",{className:"main-h",children:"Sign Up"}),Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{htmlFor:"name",children:"Name"}),Object(b.jsx)("input",{type:"text",id:"name",name:"name",value:t,onChange:o})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{htmlFor:"email",children:"Email"}),Object(b.jsx)("input",{type:"email",id:"email",name:"email",value:a,onChange:o})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{htmlFor:"password",children:"Password"}),Object(b.jsx)("input",{type:"password",id:"password",name:"password",placeholder:"At least 6 characters long",value:r,onChange:o})]}),n?Object(b.jsx)(Be,{error:i}):null,Object(b.jsx)("input",{type:"submit",className:"submit-btn"})]}),Object(b.jsxs)("p",{className:"gateway-para",children:["Already registered? ",Object(b.jsx)(T,{from:u}),"  instead."]})]}),s?Object(b.jsx)(Je,{email:a}):null,c?Object(b.jsx)(m,{}):null]})},Qe=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={name:"",email:"",password:"",signedUp:!1,hasError:!1,errorMsg:"",onWait:!1},r.handleChange=r.handleChange.bind(Object(u.a)(r)),r.handleSubmit=r.handleSubmit.bind(Object(u.a)(r)),r.onSignup=r.onSignup.bind(Object(u.a)(r)),r}return Object(l.a)(a,[{key:"handleSubmit",value:function(e){e.preventDefault(),this.validationCheck()?this.showError({msg:"Please fill all the form fields."}):this.signup()}},{key:"validationCheck",value:function(){var e=this.state,t=e.email,a=e.password,r=e.name;return""===t||""===a||""===r}},{key:"signup",value:function(){var e=this.state,t=e.email,a=e.password,r=e.name;L.signup({email:t,password:a,name:r},this.onSignup),this.setState({onWait:!0})}},{key:"onSignup",value:function(e){e?this.showError(e):this.setState({onWait:!1,signedUp:!0,hasError:!1,errorMsg:""})}},{key:"showError",value:function(e){this.setState({onWait:!1,hasError:!0,errorMsg:e.msg})}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,r=t.value;this.setState(Object(g.a)({},a,r))}},{key:"render",value:function(){var e=this.props.from;return Object(b.jsx)(Ke,Object(c.a)(Object(c.a)({},this.state),{},{handleChange:this.handleChange,handleSubmit:this.handleSubmit,from:e}))}}]),a}(r.Component);var Ze=function(e){var t=e.onWait,a=e.softwares;return Object(b.jsxs)(j.d,{children:[Object(b.jsx)(j.b,{path:"/",exact:!0,render:function(){return Object(b.jsx)(Q,{onWait:t,softwares:a})}}),Object(b.jsx)(j.b,{path:"/rated_apps",exact:!0,render:function(){return Object(b.jsx)(qe,{})}}),Object(b.jsx)(j.b,{path:"/account",exact:!0,render:function(){return Object(b.jsx)(P,{})}}),Object(b.jsx)(j.b,{path:"/signup",exact:!0,render:function(e){var t=e.location.state.from;return Object(b.jsx)(Qe,{from:t})}}),Object(b.jsx)(j.b,{path:"/signin",exact:!0,render:function(e){var t=e.location.state.from;return Object(b.jsx)(Ge,{from:t})}}),Object(b.jsx)(j.b,{path:"/software_details/:id",render:function(e){var t=function(e){return a.find((function(t){return t.id===e}))}(e.match.params.id);return t?Object(b.jsx)(Me,{software:t}):Object(b.jsx)(Z,{})}}),Object(b.jsx)(j.b,{component:Z})]})},Xe=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={softwares:[],onWait:!0,loggedin:!1,userReviews:[],fetchingUserReviews:!1},r.updateSoftware=r.updateSoftware.bind(Object(u.a)(r)),r.handleLogin=r.handleLogin.bind(Object(u.a)(r)),r.getUserReviews=r.getUserReviews.bind(Object(u.a)(r)),r}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;te.getSoftwares((function(t){return e.setState({softwares:t,onWait:!1})})),L.onLoginDetection(this.handleLogin)}},{key:"updateSoftware",value:function(e){var t=this;te.getSoftware(e,(function(e){t.setState((function(t){return{softwares:t.softwares.map((function(t){return t.id===e.id?e:t}))}}))}))}},{key:"handleLogin",value:function(e){var t=this;e&&S.set(),this.setState({loggedin:e},(function(){t.state.loggedin&&(t.getUserReviews(),S.bindUpdaterToReviews(t.getUserReviews))}))}},{key:"getUserReviews",value:function(){var e=this;this.setState({fetchingUserReviews:!0}),S.getReviews((function(t){e.setState({userReviews:t,fetchingUserReviews:!1})}))}},{key:"render",value:function(){return Object(b.jsx)(v.a,{children:Object(b.jsx)(Se.Provider,{value:{userReviews:this.state.userReviews,fetchingUserReviews:this.state.fetchingUserReviews,getUpdatedUserReviews:this.getUserReviews},children:Object(b.jsx)(Re.Provider,{value:this.updateSoftware,children:Object(b.jsx)(Ze,Object(c.a)({},this.state))})})})}}]),a}(r.Component);i.a.render(Object(b.jsx)(Xe,{}),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.66d23bb4.chunk.js.map